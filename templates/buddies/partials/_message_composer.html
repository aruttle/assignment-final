{# Renders the composer area based on auth/join status #}
{% if request.user.is_authenticated and joined %}
  <form class="mt-3 d-flex gap-2 align-items-start"
        hx-post="{% url 'buddies:message' sess.id %}"
        hx-target="#messages"
        hx-swap="beforeend">
    {% csrf_token %}
    <textarea name="body" class="form-control" rows="2" placeholder="Write a messageâ€¦"></textarea>
    <button class="btn btn-primary">Send</button>
  </form>
{% elif not request.user.is_authenticated %}
  <a class="btn btn-sm btn-primary mt-3" href="{% url 'login' %}?next={{ request.path }}">Login to post</a>
{% else %}
  <div class="text-muted small mt-3">Join this session to post</div>
{% endif %}